<table class="table">
  <thead>
  <tr class="table__headers">
    <th class="table__header">
      <div class="table__header-container">
        <p class="table__header-title">№ ТІ</p>
        <app-ui-button (btnClick)="onSortByNumberClick($event)">
          <span class="icon-sort-amount-asc"></span>
        </app-ui-button>
      </div>
    </th>
    <th class="table__header">
      <div class="table__header-container">
        <p class="table__header-title">Найменування</p>
        <app-ui-button (btnClick)="onSortByTitleClick($event)">
          <span class="icon-sort-amount-asc"></span>
        </app-ui-button>
      </div>
    </th>
    <th class="table__header">
      <div class="table__header-container">
        <p class="table__header-title">Завантажити</p>
      </div>
    </th>
    <th class="table__header">
      <div class="table__header-container">
        <p class="table__header-title">Дата затв.</p>
        <app-ui-button (btnClick)="onSortByDateClick($event)">
          <span class="icon-sort-amount-asc"></span>
        </app-ui-button>
      </div>
    </th>
    <th class="table__header">
      <div class="table__header-container">
        <p class="table__header-title">Розробник</p>
        @if (!isUnitSelected()) {
          <app-ui-button (btnClick)="onSortByDevClick($event)">
            <span class="icon-sort-amount-asc"></span>
          </app-ui-button>
        }
      </div>
    </th>
  </tr>
  </thead>
  <tbody>
    @for (i of instructions(); track i.id) {
      <tr class="table__row" (dblclick)="openInstructionModal(i)">
        <td class="table__cell">{{ i.number }}</td>
        <td class="table__cell">{{ i.title }}</td>
        <td class="table__cell">
          <a class="icon-folder-download table__title-icon" [href]="'http://localhost:3000/uploads/' + i.path_word"
             download></a>
        </td>
        <td class="table__cell">{{ i.date | date : 'dd.MM.yyyy' }}</td>
        <td class="table__cell" style="white-space: pre-line;">
          {{ i.unit_title !== null ? `${i.workshop_title + ";\n" +  i.department_title + ";\n" +  i.section_title + ";\n" +  i.unit_title + ";\n"}` : i.section_title !== null ? i.section_title +";\n" : i.department_title + ";\n" }}
          {{  i.user_title }}
        </td>
      </tr>
    }
  </tbody>
</table>
<app-manage-instruction-modal-component
  [(isManageInstructionModalOpen)]="isManageInstructionModalOpen"
  [(currentInstruction)] = "currentInstruction"
  [(isRegProtocolModalOpen)]="isRegProtocolModalOpen"
  [(currentProtocol)]="currentProtocol"
  [(measurementsArray)]="measurementsArray"
  [(isRegisteredProtocolModalOpen)]="isRegisteredProtocolModalOpen"
  [(protocolTemplateId)]="protocolTemplateId"
  [(instructionId)]="instructionId"
/>
<app-registration-protocol-modal-component
  [user] = "user()"
  [(measurementsArray)]="measurementsArray"
  [(currentInstruction)] = "currentInstruction"
  [(isRegistrationProtocolModalOpen)]="isRegProtocolModalOpen"
  [(currentProtocol)]="currentProtocol"/>
<app-registered-protocol-modal-component
  [(isRegisteredProtocolModalOpen)]="isRegisteredProtocolModalOpen"
  [(protocolTemplateId)]="protocolTemplateId"
  [(instructionId)]="instructionId"
  [(isRegProtTableModalOpen)]="isRegProtTableModalOpen"
  [(protocolId)]="protocolId"
/>
<app-reg-prot-table-modal-component
  [(isRegProtTableModalOpen)]="isRegProtTableModalOpen"
  [protocolTemplateId]="protocolTemplateId()"
  [protocolId]="protocolId()"
  [instructionId]="instructionId()"
/>
